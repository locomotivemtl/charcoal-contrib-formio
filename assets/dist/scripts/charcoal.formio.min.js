/*! @locomotivemtl/charcoal-contrib-formio 08-02-2019 */

!function(){var t=function(t){Charcoal.Admin.Property.call(this,t),this.set_properties(t).init()};(t.prototype=Object.create(Charcoal.Admin.Property.prototype)).constructor=Charcoal.Admin.Property_Input_Formio_Form,t.prototype.parent=Charcoal.Admin.Property.prototype,t.prototype.set_properties=function(t){return this._builder=void 0,this._builder_options=t.data.builder_options,this.save_action=t.save_action||"object/save",this.update_action=t.update_action||"object/update",this.$widget=this.element(),this.$builder=this.$widget.find(".js-form-builder"),this.$input=this.$widget.find(".js-input"),this.$loader=this.$widget.find(".js-loader"),this},t.prototype.init=function(){if(this.$loader.addClass("-is-loading"),"undefined"!=typeof Formio){var t=this.parse_options();this.init_builder(t)}else console.log("Missing formio.full.js dependencies")},t.prototype.parse_options=function(){return this._builder_options=$.extend(!0,{},this._builder_options),this._builder_options},t.prototype.init_builder=function(t){var i=this,o=this.$input.val()?JSON.parse(this.$input.val()):{};Formio.builder(this.$builder.get(0),o,{builder:t}).then(function(t){i.$loader.removeClass("-is-loading"),i._builder=t})},t.prototype.save=function(){this.$input.val(JSON.stringify(this._builder.schema))},Charcoal.Admin.Property_Input_Formio_Form=t}(jQuery,document,Formio);